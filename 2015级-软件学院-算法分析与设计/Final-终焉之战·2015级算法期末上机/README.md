# Final-终焉之战·2015级算法期末上机

# `A` 简单·最大公约数

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 35 总提交人数: 36

## 题目描述

计算A与B的最大公约数

## 输入

多组数据输入

每组数据为2个整数A,B(保证A,B在int范围内)

## 输出

对于每组数据，输出一行，为A,B的最大公约数的值

## 输入样例

```
1 2
```

## 输出样例

```
1
```

## AC Code

白给题目，最大公约数

不卡时间，辗转相除，快速位运算，中式GCD求解均可过

# `B` 简单·多项式计算器Ⅱ

时间限制: 5000 ms 内存限制: 65536 kb

总通过人数: 18 总提交人数: 22

## 题目描述

给定如下两个一元多项式：

𝑎0+𝑎1𝑥+𝑎2𝑥2+...+𝑎𝑛𝑥𝑛a0+a1x+a2x2+...+anxn

𝑏0+𝑏1𝑦+𝑏2𝑦2+...+𝑏𝑚𝑦𝑚b0+b1y+b2y2+...+bmym

以及不同的𝑥x与𝑦y的值，求以下式子的值：

(𝑎0+𝑎1𝑥+𝑎2𝑥2+...+𝑎𝑛𝑥𝑛)(𝑏0+𝑏1𝑦+𝑏2𝑦2+...+𝑏𝑚𝑦𝑚)(a0+a1x+a2x2+...+anxn)(b0+b1y+b2y2+...+bmym)

结果对10007取模。

## 输入

第一行为一个正整数𝑇T，代表有𝑇T组测试数据。

对于每组测试数据，第一行为一个正整数𝑛n，表示第一个多项式的次数。

第二行为𝑛+1n+1个非负整数𝑎0,𝑎1,...,𝑎𝑛a0,a1,...,an，其中𝑎𝑖ai表示第一个多项式第𝑖i次项的系数。

第三行为一个正整数𝑚m，表示第二个多项式的次数。

第四行为𝑚+1m+1个非负整数𝑏0,𝑏1,...,𝑏𝑛b0,b1,...,bn，其中𝑏𝑖bi表示第二个多项式第𝑖i次项的系数。

第五行为一个正整数𝑐c，表示𝑐c次查询。

接下来𝑐c行，每行两个非负整数𝑥,𝑦x,y，分别表示第一个多项式的变量值和第二个多项式的变量值。

保证1≤𝑇≤51≤T≤5，1≤𝑛,𝑚≤100,0001≤n,m≤100,000，0≤𝑎𝑖,𝑏𝑖≤10000≤ai,bi≤1000，1≤𝑐≤10001≤c≤1000，0≤𝑥,𝑦≤10000≤x,y≤1000

## 输出

对于每次查询，输出一行，一个数，所求式子对10007取模得到的结果。

## 输入样例

```
1
3
0 1 2 3
3
1 2 3 4
3
1 1
2 1
2 2
```

## 输出样例

```
60
340
1666
```

## 思路

霍纳法则

# `C` 简单·简单的贪心

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 29 总提交人数: 29

## 题目描述

在黑板上写了N个正整数做成的一个数列，进行如下操作：

每一次擦去其中的两个数a和b，然后在数列中加入一个数a×b+1，如此下去直至黑板上剩下一个数。

在所有按这种操作方式最后得到的数中，最大的max，最小的为min，则该数列的极差定义为M=max-min。

## 输入

多组数据输入

每组数据第一行为N 2<=N<=20

接下来一行，为N个int范围内的正整数。（保证运算过程中数据范围在2^63以内）

## 输出

对于每组数据，输出一行，为极差M的值

## 输入样例

```
4
2 1 4 3
```

## 输出样例

```
13
```

## 思路

贪心 优先队列

最大值是每次取两个最小的值相乘，最小值是每次取两个最大的值相乘

# `D` 简单·梦想始发车

时间限制: 2000 ms 内存限制: 131072 kb

总通过人数: 16 总提交人数: 20

## 题目描述

“梦想始发车”即将于2016年12月30日启航！

已知：“梦想始发车”在一条地铁线路上行驶。这条地铁线路上有𝑛n个站，每个站都有各自的站间距。

求：这条地铁线路上所有可能的乘车方案的路程从小到大排序后的第𝑘k个数。

乘车方案须满足至少坐一个站，且仅能乘坐一次，到达终点站须清客。

## 输入

输入包含多组测试数据，以EOF结束。

每组数据第一行为2个数𝑛,𝑘n,k，其中𝑛n代表站点数目，𝑘k代表所求所有路程从小到大排序后的第几个数；

第二行为𝑛−1n−1个数𝑥𝑖xi，以一个空格分隔。对于第 𝑖i 个数（1≤𝑖≤𝑛−11≤i≤n−1），代表地铁线路上第 𝑖i 个站到第 𝑖+1i+1 个站的站间距（均为路程）。

保证2≤𝑛≤40002≤n≤4000，1≤𝑘≤𝑛(𝑛−1)1≤k≤n(n−1)，1≤𝑥𝑖≤1051≤xi≤105

对于所给的数据，两端的终点站分别为第`1`个站和第`n`个站。

## 输出

对于每组数据，输出一行，一个整数，表示所求的路程。

## 输入样例

```
2 2
3
3 5
4 5
```

## 输出样例

```
3
9
```

## 样例解释

对于第一组数据，共有2种乘车方案，分别为从第`1`个站到第`2`个站，以及从第`2`个站到第`1`个站，其路程均为`3`，故从小到大排序后的第2个数为`3`；

对于第二组数据，地铁运行图如下：

乘车方案共如下6种：

1. 从站点1到站点2，路程为4；
2. 从站点1到站点3，路程为9；
3. 从站点2到站点1，路程为4；
4. 从站点2到站点3，路程为5；
5. 从站点3到站点1，路程为9；
6. 从站点3到站点2，路程为5.

得到所有可能的乘车方案的路程从小到大排序为：

```
4 4 5 5 9 9
```

故第5个数为`9`

## 思路

建立前缀和，然后将所有的可能的区间和全部加入数列，再调用nth_element找对应排名即可

复杂度O(n^2)

# `E` 中等·跑得快的王木木

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 1 总提交人数: 2

## 题目描述

有一个人，不妨假定就是王木木，是一位记者，有一天，主编告诉他，XX地方出了一个大新闻，要王木木赶快跑过去采访。

已知：

1.普通的王木木每秒能跑17m

2.暴走的王木木可以通过消耗10点体力值来在1秒内疾行60m

3.怠惰的王木木跑不动了，但是可以恢复4点体力值

4.王木木每秒能恢复1点体力值。

现在已知王木木的体力初值M，他所在的初始位置与新闻地之间的距离S，王木木剩余的时间T。你的任务是写一个程序帮助王木木计算如何在最短的时间内跑到目的地，若不能跑到，则输出王木木在剩下的时间内能跑的最远距离。

注意:王木木跑步、疾行或休息活动均以秒(s)为单位。且每次活动的持续时间为整数秒。距离的单位为米(m)。

## 输入

多组输入数据

每组数据一行，为用空格隔开的三个非负整数M，S，T

1 <= T <= 10000， 0 <= M<=100， 1 <=S <= 10^6

## 输出

对于每组数据，输出：

第1行为字符串“Yes”或“No” ，即王木木是否能逃离荒岛。

第2行包含一个整数，

第一行为“Yes” 时表示王木木跑到目的地的最短时间

第一行为“No” 时表示王木木能跑的最远距离。

## 输入样例

```
9 77 2
9 94 3
8 94 3
8 60 2
37 1000 28
```

## 输出样例

```
Yes
2
Yes
3
Yes
3
Yes
2
No
754
```

## 思路

很容易写错的贪心类问题

1.走17米的操作越靠前越好
因为可以先获得体力，然后传送可使用的就更多了

2.光走17米还是比传送要慢
1000个17，用时1000，产生1000体力
同样用时1000，等两次传一次，则3秒60米回1点体力
循环一定次数，剩余时间休息，得到的体力比刚才还要多

所以说就是在这两种操作中进行调整

安全时间的上限是10000，以此做搜索即可
也就是先只走17，后面休息
只是要看从哪里开始走得最远，时间最少

# `F` 中等·Magry恼人的词典编辑

时间限制: 2000 ms 内存限制: 65536 kb

总通过人数: 14 总提交人数: 16

## 题目描述

最近`Magry`收到了任务：

给定n个单词（全部由小写字母组成），将给定的单词按如下规则排序：

1. 最后得到的排序顺序应为字典序非降序排列；
2. 只能通过不断交换相邻两个单词完成排序。

已知`Magry`每进行相邻两个单词的交换操作花费的代价为`1`，求排序最小代价。

## 输入

第一行为一个正整数𝑇T，代表有𝑇T组测试数据。

对于每组测试数据，第一行为一个正整数𝑛n，表示有𝑛n个单词。

接下来𝑛n行，每行一个长度不多于20的字符串（非空），表示待排序的单词序列。

保证1≤𝑇≤101≤T≤10，1≤𝑛≤100,0001≤n≤100,000，每个单词仅包含小写字母。

## 输出

对于每组数据，输出一行，一个整数，排序最小代价。

## 输入样例

```
2
3
zoo
pen
apple
3
apple
banana
ask
```

## 输出样例

```
3
1
```

## 提示

求得的排序最小代价在`long long`范围内。

## 思路

归并排序模板，以字典序进行排序即可

# `G` 中等·Magry摆什锦糖

时间限制: 2000 ms 内存限制: 65536 kb

总通过人数: 17 总提交人数: 17

## 题目描述

新年快要到啦，`Magry`和家里人一起置办年货，买了𝑛n块糖准备摆成什锦糖。

已知：𝑛n块糖，以及这𝑛n块糖的美味程度𝑐1,𝑐2,...,𝑐𝑛c1,c2,...,cn

`Magry`想拿这𝑛n块糖中的一部分摆美味程度和为𝑘k的什锦糖，问：能否拼成美味程度和为𝑘k的什锦糖？

## 输入

输入包含多组测试数据，以EOF结束。

每组数据第一行为2个正整数𝑛,𝑘n,k，以一个空格分隔，分别代表糖果总数𝑛n与需要摆出的什锦糖的美味程度总和𝑘k

第二行为𝑛n个正整数𝑐1,𝑐2,...,𝑐𝑛c1,c2,...,cn，表示𝑛n块糖的美味程度。

保证1≤𝑛,𝑘≤5001≤n,k≤500，1≤𝑐𝑖≤5001≤ci≤500

## 输出

对于每组数据，输出一行，若能则输出`Yes`，否则输出`No`

具体参见样例。

## 输入样例

```
3 50
25 25 50
6 18
5 6 1 10 12 2
6 500
5 6 1 10 12 2
```

## 输出样例

```
Yes
Yes
No
```

## 思路

01背包

根据进入的背包做状态转移即可，并不难

# `H` 难题·大独裁者的以后

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 3 总提交人数: 3

## 题目描述

大独裁者终究也有说再见的一天。

临终之前，大独裁者托付给`Magry`要把他安葬在一处凸多边形的地盘中。

然而，`Magry`却发现这块地盘有几处标志桩消失了。请问，`Magry`能只根据剩余的**全部**𝑛n处标志桩唯一地确定大独裁者要安葬的地盘吗？

## 输入

第一行包含一个整数𝑇T，代表有𝑇T组测试数据。

每组数据第一行为一个正整数𝑛n，代表剩余的标志桩数目。

接下来𝑛n行，每行2个整数𝑥𝑖,𝑦𝑖xi,yi，代表第 𝑖i 处标志桩的坐标。

保证：1≤𝑇≤101≤T≤10，1≤𝑛≤10001≤n≤1000，0≤𝑥𝑖,𝑦𝑖≤1080≤xi,yi≤108

## 输出

对于每组数据，输出一行。若能确定地盘输出`Yes`，否则输出`No`

## 输入样例

```
2
6
0 0
1 2
3 4
2 0
2 4 
5 0
8
0 2
1 3
2 4
3 4
4 4
5 2
6 0
3 1
```

## 输出样例

```
No
Yes
```

## 思路

看上去会有一些蒙，所谓的稳定凸包一开始不太想得清楚是啥

但是实际上本质就是，一条直线上有3点贡献的话，则能确定该边必然是凸包的边之一

所以题目的思路就变成了，凸包的所有边都是三点共线的才符合条件

# `I` 难题·圣杯之战·最终章

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 3 总提交人数: 3

## 题目描述

圣杯之战已经进行到了尾声，众servant纷纷出局，只剩下了李saber和Berserker。

李云龙仰天大笑，使出了对界宝具——意大利炮。 （欢迎来到我的世界）

然而Berserker也不甘示弱，突然就觉悟了影分身之术，结界忽的出现了很多个Berserker。

因为Berserker执念很强，留下一个都可能死而复生，所以必须全部消灭掉。

现将问题简化，将结界视为一个m*n的正方形，李saber能在某一行或者某一列安置意大利炮，一个意大利炮能消灭一行或者一列的Berserker。

在第i行开炮消耗的魔力为Ri，在第j列开炮消耗的魔力为Cj，如果要消灭所有的Berserker，最少需要多少魔力？

## 输入

第一个数为数据组数T

每组数据组数第一行为m,n,L三个整数 1<= m,n,L <= 50，分别表示结界的行，列和Berserker的数目。

接下来一行为m个实数，第i个实数表示Ri

再接下来一行为n个实数，第j个实数表示Cj

Ri,Cj均大于等于1.0，小于等于10.0

最后L行，每行两个整数，表述一个Berserker的坐标。

## 输出

对于每组数据，输出一行，为选择的行列的费用的`乘积`的最小值，保留4位有效数字。

## 输入样例

```
1
4 4 5
2.0 7.0 5.0 2.0
1.5 2.0 2.0 8.0
1 1
2 2
3 3 
4 4
1 4
```

## 输出样例

```
16.0000
```

## 思路

首先这种整行整列处理问题的，首先需要想到的套路就是**二分图**，分为行的序号和列的序号，共n+m个节点

那么全部Berserker都去掉的问题，也就意味着，从行序号的点到列序号的点不再存在独立的路径，那么我们就可以把它想象成为**图的最小割的问题**，**根据最小割=最大流，就可以采用网络流的解法了。**

需要等价的建模的话，那么就是根据套路，建立超级源点和超级汇点，把消除行和列的费用从源点连到行序号或者从列序号连到汇点即可。然后中间所有出现的行列相交的边，设置容量为INF即可。

求的是费用的乘积，那也好说，**直接取对数即可把乘法转换成加法，然后采用次幂转换回来，就是所求解了**

由于本题是二分图，所以这题利用二分图带权匹配做法同样可行。

# `J` 难题·Magry摆什锦糖

时间限制: 2000 ms 内存限制: 65536 kb

总通过人数: 3 总提交人数: 7



## 题目描述

新年快要到啦，`Magry`和家里人一起置办年货，买了𝑛n块糖准备摆成什锦糖。

已知：𝑛n块糖，以及这𝑛n块糖的美味程度𝑐1,𝑐2,...,𝑐𝑛c1,c2,...,cn

`Magry`想拿这𝑛n块糖中的一部分摆美味程度和为𝑘k的什锦糖，问：能拼成美味程度和为𝑘k的什锦糖的每个糖果组合中，取任意个数糖果求和的结果及求得结果值的数目。

## 输入

输入包含多组测试数据，以EOF结束。

每组数据第一行为2个正整数𝑛,𝑘n,k，以一个空格分隔，分别代表糖果总数𝑛n与需要摆出的什锦糖的美味程度总和𝑘k

第二行为𝑛n个正整数𝑐1,𝑐2,...,𝑐𝑛c1,c2,...,cn，表示𝑛n块糖的美味程度。

保证1≤𝑛,𝑘≤5001≤n,k≤500，1≤𝑐𝑖≤5001≤ci≤500

## 输出

对于每组数据，输出两行。

第一行为一个整数𝑥x，表示结果值的数目。

第二行为𝑥x个整数，表示所得到的结果值。须按照**从小到大排序**的方式输出。

若不存在组合成美味程度和为𝑘k的什锦糖的方案，则在第二行输出`None`。

具体参见样例。

## 输入样例

```
3 50
25 25 50
6 18
5 6 1 10 12 2
6 500
5 6 1 10 12 2
```

## 输出样例

```
3
0 25 50
16
0 1 2 3 5 6 7 8 10 11 12 13 15 16 17 18 
0
None
```

## 思路

**注意:本题跟上面的题目虽然同名，但是完全不是一个题目**

看上去是一个暴力搜索的问题，**然而本质上依旧是一个01背包**

考虑f(i,j)为，**是否取得到总和为i的糖果，在组成i的所有糖果组合当中，是否存在为j的糖果。单位是bool**

那么每加入一个背包，f(a[i],a[i])和f(a[i],0)首先初始化为true

再根据已有的情况，如果f(j-a[i],j-a[i])则是true，并且把对应的全都加到新的加和上

比如目前组合为6的糖果分可能组成为0 2 3 6

再放入一颗5的糖果的时候，那么首先5可以取到，对应可能组成为0 5

然后将11设为true，可能组成的值为0 2 3 6 7 11（即两者的所有加和可能）

由于本题数组存储量较大，所以需要做滚动数组或临时数组的降维处理

空间复杂度为O(k^2) 时间复杂度为O(nk^2)

# `K` 难题·序列划分

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 3 总提交人数: 3

## 题目描述

给定一个非降序排列的数组𝐴A，将其划分成𝑘k个**非空**的连续子序列。

设第i个序列的和为𝑆(𝑖)S(i)，求一种划分方案使得所有𝑆(𝑖)S(i)的最大值最小。

若存在多解，则优先划分在前面。

## 输入

输入包含多组测试数据，以EOF结束。

对于每组测试数据，第一行为2个数𝑛,𝑘n,k，分别表示数组长度𝑛n和划分序列个数𝑘k

接下来一行，为𝑛n个范围为(0,1,000,000](0,1,000,000]的整数，表示数组𝐴A的元素，保证数组𝐴A中所有元素已非降序排列。

保证1≤𝑘≤𝑛≤5001≤k≤n≤500

## 输出

对于每组数据，输出一行，所求划分方案。

对于划分的位置，两个数之间用 ` \ `分隔（一个'\'符号和其左右两边各一个空格），其余位置两数之间以一个空格分隔。

格式参见样例。

## 输入样例

```
9 3
1 2 3 4 5 6 7 8 9
5 4
21 21 21 21 21
```

## 输出样例

```
1 2 3 4 5 \ 6 7 \ 8 9
21 \ 21 \ 21 \ 21 21
```

## Source

UVa714，有小幅改动

## 思路

首先先求出S(i)最小的最大值应该是多少，这一步可以通过二分答案搜索得到

然后接下来需要划分，由于优先划在最前面，那么就从末尾开始倒着贪心划分。

在划分的时候不仅需要考虑是否可以达到划分的最大值，如果剩余的元素比剩余未划分的区间小于等于了，那么必须强制修正，该区间只允许存在1个区间

