[toc]

# 航C加油站第一期

## 前言

首先恭喜大家结束了期待已久的第一次上机（x）

<img src="https://s3.bmp.ovh/imgs/2022/03/be08a9071245da39.jpeg" alt="img1" style="zoom:50%;" />

第一次上机，相信对于大家是印象深刻的，从理论应用到实践，从用眼看到动手写，从听老师讲到独立思考，会发现很多东西不是那么熟悉，容易犯很多错误，一学就会，一做就废。不过，这种情况很正常，特别是对于新手来说；助教们的建议是，多写，多练，多犯错，多解决错误，每次上机未完成的题目可以在课后结合题解去完成，练习赛有充分的时间，可以去巩固练习。

同时，对于每次上机同学们千奇百怪的代码和各种各样的bug，助教们一天25小时高强度地帮大家答疑，并将一些同学们易错点整理出来，每次上机结束后，整理成**航C加油站**送给大家！



这次的易错点整理大致为分【语法类】【逻辑类】【效率类】

## 语法类

### 中文符号

中文括号、中文引号、中文分号等都是错误的；建议将键盘锁定为英文输入法。



### 运算优先级

```C
(-b+sqrt(delta))/2*a
```

上面这个语句的意思是先除以2，再整体乘以a，a乘到分子上面去了，所以应该写成下面这样

```C
(-b+sqrt(delta))/(2*a)
//或者
(-b+sqrt(delta))/2/a
```



再一个

```C
(ch=getchar())!=EOF; //正确写法
ch=getchar()!=EOF;   //错误写法
// 由于!=的优先级高于赋值=，所以上述错误写法相当于ch=(getchar()!=EOF)
// 其含义为，如果读到的字符不是EOF，那么后面的判断成立，值为1，赋予ch
// 如果读到的字符是EOF，那么后面的判断不成立，值为0，赋予ch
```

对于不确定的运算优先级，建议都打上括号



### 平方，逻辑与或

```C
a*a; //平方；不是a^2
expression1 && expression2//逻辑与；不是expression1 and expression2
expression1 || expression2//逻辑或；不是expression1 or expression2
```



### 取地址符&

scanf读取数据的时候没有加取地址符&，printf输出数据的时候多加取地址符&

这个符号涉及到了指针的内容，现在我们只需要记住，`scanf`读取（除字符串外）需要`&`，`printf`输出不需要。

```c
// 一个错误示范
int a, b;
scanf("%d%d", a, b);
// 另一个错误示范（这个暂时可以不理解，学了字符串就明白了）
char s[100];
scanf("%s", &s);
// 还一个错误示范
printf("%d", &a);

// 正确示范
scanf("%d%d", &a, &b);
printf("%d", a);
```



### scanf 里双引号

```c
//错误示范
scanf("%d%d,&a,&n");
```



### 单等=和双等==

逻辑运算的相等是**==**，很多同学容易打成**=**，从而变成**赋值语句**。这个问题致命的地方在于可以编译通过不容易发现。这里建议赋值语句中把**变量放在右遍，常量放在左边**。不过最好的解决方法是时刻提醒自己相等逻辑运算符的写法



### 加大括号

if while等多语句不加大括号

```C
/*
if (b * b - 4 * a * c < 0)
    printf("no real roots");
else
    x1 = (-b - sqrt(b * b - 4 * a * c)) / (2 * a);
    x2 = (-b + sqrt(b * b - 4 * a * c)) / (2 * a);
    if (x1 < x2)
        printf("%.6lf %.6lf", x2, x1);
    else
        printf("%.6lf %.6lf", x1, x2);
*/

//上面这段代码等价于
if (b * b - 4 * a * c < 0)
    printf("no real roots");
else
    x1 = (-b - sqrt(b * b - 4 * a * c)) / (2 * a);

x2 = (-b + sqrt(b * b - 4 * a * c)) / (2 * a);
if (x1 < x2)
    printf("%.6lf %.6lf", x1, x2);
else
    printf("%.6lf %.6lf", x2, x1);

//从x2开始的语句就不属于else的部分了，因此，记得打打括号
```



### 变量类型与占位符

变量类型和占位符需一致，如下

```C
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
int main(void)
{
    int a = 1;
    char b = 'A';
    double pi = acos(-1);
    long long c = 0x7fffffff;
    c++;
    unsigned int d = 2147483748;
    unsigned long long big_num = (1ull << 35);

    // 什么样的数据类型用什么样的占位符
    // scanf("%lf", &pi);
    printf("%d\n", a);
    printf("%c\n", b); // 输出char类型变量不要用%d
    printf("%f\n", pi);
    printf("%lld\n", c);
    printf("%u\n", d);
    printf("%llu\n", big_num);

    /************************  下面的内容可自行了解  ***********************/
    //整型格式化
    putchar('\n');
    printf("%5d\n", a);  //输出占5位，不足位补空格，默认居右
    printf("%-5d\n", a); //输出占5位，不足位补空格，居左
    printf("%05d\n", a); //输出占5位，不足位补0
    printf("%+d\n", a);  //输出符号位
    printf("%+d\n", -a); //输出符号位

    //浮点型
    // printf("%m.nf\n",pi);
    printf("%10f\n", pi);
    printf("%.3f\n", pi);
    printf("%10.3f\n", pi);
    printf("%.0f\n", pi); //四舍五入保留整数
    // m的格式控制同整型
    printf("%010.3f\n", pi);
    printf("%+f\n", pi);

    return 0;
}
```



### 整型相除

两个整型相除是舍弃小数部分的，即使是下面这样也不行

```C
double ans;
int m, n;
scanf("%d%d", &m, &n);
ans = m / n;
// 即使ans是double类型，m和n的运算还是按整型相除来进行的，然后把舍弃小数部分的结果赋值给ans
// 假若输入5 2，ans的值是2.0而非2.5

// 有两种解决方法，如下
ans = (double)m/n; //注意不要写成 (double)(m/n)
ans = 1.0*m/n;
```



### 浮点数判断

由于浮点数误差，判断两个浮点数相等时请不要使用==，有些浮点数在计算机中并不是精确存储的，比如`double a=0.0006;`实际上a可能是0.0005999999999999999474，那如何判断浮点数相等呢，如下：

```C
double d1, d2;
double EPS = 1e-9;
// 判断两个浮点数是否相等
if (fabs(d1 - d2) < EPS)
    printf("Equal\n");
//特殊地，判断一个浮点数是不是0
if (fabs(d1) < EPS)
    printf("Equal to 0");
```



### 多组数据输入

以文件结束符EOF为结尾的输入请以EOF判断结尾，具体使用见题解



### printf格式控制

比如字符也是数这题，有的同学的代码如下：

```c
char a;
a=getchar();
printf("%d is the ASCII code for %c.",a);
```

**错误原因**：printf函数语句运用不娴熟，第一个a对应%d的位置，应当再加一个a来对应%c的位置

**正确代码**：

```c
char a;
a=getchar();
printf("%d is the ASCII code for %c.",a,a);
```



### 多个条件判断

```C
if(0<=a<=100) //错误！错误的表达！！
if(0<=a && a<=100) //正确的表达
```





## 逻辑类

### 要看清题

<p style="color:red;">看清题！！！</p>

比如C题要求**两个根从小到大输出，有重根的话输出两个一样的**，D题多个条件不要看漏

求根公式：
$$
x=\frac{-b\pm \sqrt{b^2-4ac}}{2a}
$$
转化为代码，即为：

```c
x1 = (-b + sqrt(b * b - 4 * a * c)) / (2 * a);
x2 = (-b - sqrt(b * b - 4 * a * c)) / (2 * a);
```

`x1`一定比`x2`大吗？分母是负数怎么办？



### 要初始化

在主函数里定义的变量最好赋一个初始值，否则它会是随机的（可能出现本地是对的交上去不对）。



### 数据类型

定义变量前根据题目的数据范围检查一下运算过程中的最大最小值、是否有小数运算，从而确定要定义的数据类型。



### 判断逻辑

if，else if，else的逻辑问题，比如F题字符变变变，有的同学的代码如下：

```c
if(islower(s[i]))s[i]-='a'-'A';
if(isupper(s[i]))s[i]+='a'-'A';
else s[i]=s[i];
```

**错误原因**：if-else语句逻辑不清，当s[i]是小写字母时会进入第一个if判断，将s[i]转换成大写字母，**但是注意**，此时s[i]还会进入第二个if判断，此时s[i]刚好在上一步变成了大写字母，从而在第二个if中又改回了小写字母，逻辑错误。**正确代码**：

```c
if(islower(s[i]))s[i]-='a'-'A';
else if(isupper(s[i]))s[i]+='a'-'A';
else s[i]=s[i];
```



### 乱打分号

```C
while(i<n);
{
    //your code
    i++;
}

// while后面的;是一个空语句，只有这个空语句属于while，其他都不属于
// 上面这段代码等价于下面这样
while (i < n)
    ;

// your code
i++;
```

同理，if语句和for语句后面也不要加多余的分号；



### 数据范围

不要在代码中验证题目给出的数据范围

<img src="https://s3.bmp.ovh/imgs/2022/03/c93afa46592d1234.png" style="zoom:40%;" />

题目给出的数据范围不需要你去限定，题目的意思是，测试的数据范围是这样，只要在这个范围里去写就行了



### 重新编译

修改完代码记得点一下重新编译再运行



## 效率类

### 输出固定字符串

对于题目要求的某些特定字符串输出，比如 `%d is the ASCII code for %c.`，`Runtime Error (SIGFPE)` 等，建议复制再更改，而非自己手动写，以免有的助教喜欢让你输出 `0verf1ow` [Doge]



### 不要用动态数组

定义数组不要用$a[n]$定义，虽然 C99 支持这样的动态数组的定义，但是非常不建议，很容易出现数组越界的错误，我们可以根据题目的数据范围定义一个足够大的数组；比如 `G统计统计成绩` ，题目中n不会超过1000，我们定义一个 a[1005] 肯定就够用了。



### 判断条件

不要在`if()`里写超长一串，除非你的逻辑已经超强了，否则很容易出错。建议用`if` 、`else if`和`else`判断。



## 试图打表

有时候打表做题，效率极其低下

<img src="https://s3.bmp.ovh/imgs/2022/03/c359121cbc064644.jpeg" alt="img2" style="zoom:30%;" />

虽然**人类的力量是无穷的**，但是非常非常不建议这样做，这样还是传统的书本思维而非计算机思维，花费了大量的力气却不讨好，没有享受到计算机带来的便利；



### 字符画

字符画建议使用查找替换功能



### 缩进

缩进糟糕，导致代码逻辑看起来很混乱，可以参考一下书上的缩进

这些问题可能对写对题目没有影响，但是绝对不是一个好的编程习惯。当代码量增大时（如《编译原理》课程代码动辄万行），这种不好的编程习惯对你造成的困扰是非常大的。

各种IDE格式化代码的快捷键如下：

* DevC++: Ctrl+shift+A
* VSCode: Alt+shift+F
* VS2022: ctrl+k ctrl+d
* CodeBlocks: 右键+Format use Astyle

优秀程序员应具备的一些素质

* 使用TAB (table) 键缩进或空格；{ } 对齐
* 有合适的空行和空格
* 不使用无意义的缩写
* 习惯用小写字母，C/C++区分大小写
* 使用规范且有意义的命名（匈牙利命名法、骆驼命名法、下划线法、帕斯卡命名法）
* 有足够的注释

（来自宋老师课件）



## ？？类

试图通过 `a*x*x+b*x+c=0` 直接让电脑解方程，虽然但是，思维新奇



## 最后

对于很多同学，航C（即C语言程序设计）这门课是上的第一门编程课——或者你之前接触过一点`Python`，however——C语言的难度并不低。课堂上老师强调的多是语法学习，类比到自然语言的的学习，就是教你一句话怎么说单词怎么用，而编程尤其是航C包含的题，则是要你写一篇能发表的作文出来。

我的看法是：不要着急和最厉害的那些同学比，一点点来，形成良好的代码习惯，多交流多讨论，积极写题，也不要过于较劲。参考书倒不是必须的，虽然现在`CSDN`风评不太好，不过上一上找找别人的代码思路还是很不错的。善用搜索引擎！！你的大部分问题别人都问过了。有余力多看看函数原型。（来自助教董文逸）



**航C加油站第一期**就到这里啦！还是整理了不少的问题，希望同学们好好利用，多加思考，**感谢雷骧逸、董文逸、李南冰、雒子清、王雯翰、张皓南、张京泽、任姜一、许文冲等助教的总结，陈博胆整理而成。**

祝大家题题AC，编程能力up！

![img4](https://s3.bmp.ovh/imgs/2022/03/d29d67c7c3d780a6.jpeg)