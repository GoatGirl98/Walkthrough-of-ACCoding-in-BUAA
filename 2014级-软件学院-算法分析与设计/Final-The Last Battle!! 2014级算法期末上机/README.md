# Final-The Last Battle!! 2014级算法期末上机

# `A` 简单题——I wanna be the 升级者Ⅰ

时间限制: 500 ms 内存限制: 65536 kb

总通过人数: 32 总提交人数: 35



## 题目描述

I wanna 系列是一个非常有趣的小游戏，各种奇巧精妙的机关另同类游戏相形见绌。作为一个I wanna 爱好者，零崎也是非常努力的提升着自己的水平。

现假定I wanna 的第k张地图上有机关数量Tk，零崎想找到一张难度适中比如说机关数第K大的地图是哪张以及这张地图上有多少机关，那么现在，任务就交给你们了！

## 输入

多组测试数据。 对于每组数据，第一行为两个整数n与k，表示有n张地图，零崎希望找到机关数第k多的。

接下来一行n个整数表示每张地图上的机关数量。(保证机关数量各不相同）

1<=k<=n<=1000000

## 输出

对于每组数据，输出一行，为地图编号和对应的机关数。

格式为mapi : k。

## 输入样例

```
5 3
1 3 4 2 5
5 1
5 7 6 8 2
```

## 输出样例

```
map2 : 3
map4 : 8
```

## 思路

水题，nth_element水过

# `B` 简单题——I wanna be the 升级者Ⅱ

时间限制: 500 ms 内存限制: 65536 kb

总通过人数: 28 总提交人数: 28



## 题目描述

零崎的I wanna 玩的越来越好，不过，关卡也越来越难了（机关数递增）。现在零崎面临着一个困境：以零崎的水平，只能通过一组机关数为k的组合机关，这样下去是到不了下一个存档点的！

面临困境的零崎急需提升自己的水平，那么他至少要把水平提升到多少才能顺利通过下一个关卡呢？

## 输入

多组测试数据。 对于每组数据，第一行为一个整数n，表示有n张地图。

接下来一行n个整数表示每张地图上的机关数量。(已经非降序排好）

最后一行为零崎现在的水平k（一定小于某个地图机关数）。

1<=n<=1000000,1<= k<=INT_MAX

## 输出

对于每组数据，输出一行，为零崎需要提升到的水平

## 输入样例

```
5
1 2 4 5 10
3
```

## 输出样例

```
4
```

## 思路

二分lower_bound

# `C` 简单题——Railway Station

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 28 总提交人数: 34



## 题目描述

火车终点站的作用是让火车暂时进入停靠后，进行修正后再度运行。Nova君所在的小城镇X就建设了一个火车终点站，然而，因为其轨道宽度有限，无法同时让多辆火车驶入，但长度比较余裕。因此，当火车A的进入车站后，如果接着火车B也进入了车站，那只有当B从车站出发后，A才能驶出。现在，假设编号为1,2,3...N的火车按自身编号的相对顺序进入车站，请问，可能的出站顺序有哪些？

## 输入

多组测试数据（组数不超过100），对于每组数据，第一行输入两个正整数N和M(M和N都在INT范围内)，N代表火车的数量，M代表查询次数。接下M行，每行代表一个查询顺序，由N个正整数a1,a2,a3...an组成，表示编号为a1的火车第一个出车站，编号为a2的火车第二个出，以此类推。

## 输出

对于每组数据，输出M行，如果查询顺序有可能出现则输出“YES”，否则输出“NO”，每组数据间，用一个空行隔开。

## 输入样例

```
5 2
1 2 3 4 5
5 4 1 2 3
```

## 输出样例

```
YES
NO
```

## 思路

数据结构的栈混洗问题

参照邓俊辉《数据结构》栈与队列部分的知识内容

# `D` 简单题——我在东北玩泥巴

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 20 总提交人数: 26



## 题目描述

Nova君的室友小明和小尧都是东北汉子，他们都爱玩泥巴，泥巴在他们看来弥足珍贵。他们玩泥巴的规则很奇葩，他们会找到有很多泥巴块的地方，轮流去减泥巴。他们认为自己好歹也是程序员，单纯的玩泥巴太丢面子，于是为了凸显程序员的智商，他们决定每次捡取的泥巴块数必须是2的非负整数次幂（即1,2,4,8...），最终泥巴捡完的人获胜。现在让小明先手，请问最终谁能赢。

## 输入

多组测试数据（组数不超过100），对于每组数据输入一行，为一个正整数（INT范围内）

## 输出

对于每组数据，输出一行，若小明获胜输出“xiaoming”，否则输出“xiaoyao”。（不含引号）

## 输入样例

```
1
2
3
```

## 输出样例

```
xiaoming
xiaoming
xiaoyao
```

## 思路

博弈论

但是其实相当的水，通过找规律，就能发现答案是什么了...

# `E` 中等题——零崎的考试

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 15 总提交人数: 19



## 题目描述

零崎前两天遇到了一场无语的网络存储考试，因为这个考试都是选择题，然而每个题的选项并不是唯一的，不同选项会有不同得分，不同题目分值也不同。虽说只要到了某个分值就可以通过考试，不过最后考完还是有点恶心。

现在，考完试的零崎突然很好奇，他到底有多少种方式能通过考试呢？

## 输入

多组测试数据。第一行两个整数n、k，为题目数和需要达到的分数。

接下来一行n个整数，为每个题目对应的得分。

1<=n<=30,1<=k<=100

## 输出

对于每组数据，输出一行，为可以通过考试的选择方案数。

## 输入样例

```
3 4
1 2 3
```

## 输出样例

```
3
```

## Hint

样例中3题共8种方案，得分大于等于4的共3种，因为最多30道题总方案数才2^30所以不会超过int，如果自测爆掉一定是你们姿势有问题（手动滑稽）

## 思路

这就是个01背包的问题，没啥好说的

# `F` 中等题——伪流水线调度

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 10 总提交人数: 10



## 题目描述

江南最大的皮革厂即将倒闭，厂长不知去向，但是厂内的机器还在。本着人道主义精神，Nova君决定帮助这家工厂完成尚未完成的订单。Nova君清点了工厂的物资，发现在有n个机器可以工作，还有m个订单没有完成。由于是快要倒闭的工厂，设备破旧，每个机器至多能完成一个任务，完成后就报废了。对于机器 i ，有一个最大运行时间xi和等级yi，对于订单 j ，也有一个完成所需时间xj和等级要求yj。只有当xi>=xj且yi>=yj的时候，机器 i才能完成任务 j，并获得1000xj+10yj的利润。请问最多能完成几个任务？当出现多种情况时，输出获得利润最多的情况。

## 输入

多组测试数据（组数不超过100），对于每组数据，第一行为两个正整数N和M，N代表机器数，M代表订单数。接下来输入N行，每行两个正整数xi和yi，接下来M行，每行两个正整数xj和yj。

1<= N <=100000,1<= M <=100000，0<xi<1000，0=<yi<=100，0<xi<1000，0=<yi<=100

xi、yi、xj、yj 具体含义见题目描述

## 输出

对于每组数据，输出一行，包含两个正整数，第一个为可以完成的订单数的最大值，第二个是获得的利润。

## 输入样例

```
1 2
100 3
100 2
100 1
```

## 输出样例

```
1 100020
```

## 思路

贪心

排序的时候可以发现，应该优先找x最小的，x一样的基础上再找y最小的

然后对于所有的任务也是，根据y排序，找到可以匹配的最小参数的机器，进行计算即可

# `G` 中等题——果园连连看

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 15 总提交人数: 15



## 题目描述

一个面积为M*N的果园，种了苹果，梨和橘子三种果树。相邻（上下左右）的果树可以连在一起，看作一块区域，问果园共有多少个区域？

PS：‘a’代表苹果树；‘p’代表梨树；‘o’代表橘子树

## 输入

多组测试数据（组数不超过10），对于每组数据，第一行为两个正整数N和M，代表果园的大小为N*M。接下来输入一个N行M列的二维字符矩阵，代表果园的布局。

0<N，M<100

## 输出

对于每组数据，输出一行，表示果园的区域个数。

## 输入样例

```
4 4
aapp
aapp
oopp
aaoo
```

## 输出样例

```
5
```

## 思路

dfs求连通块个数，水到我不想多说...

# `H` 难题——再见了，大活

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 7 总提交人数: 9



## 题目描述

在北航学院路校区，有一个叫做大学生活动中心的地方，是很多社团曾经的活动室，然而现在大活改造，依照北航翻修学院路食堂的效率来看，对于零崎来说，恐怕要和大活说再见了。

但是大活那边的活动室里还有好多前辈们留下的各种物品，需要搬出来留给社团的后来人，不过沙河那边也没什么地方可放，迫于无奈，只能从n件中挑出一部分搬走了。

零崎在搬东西的时候会左右手各拿一件，也就是说零崎现在会用k次把2k件物品带走，每次搬运会消耗两侧物体的重量差值平方的体力值（看起来有点奇怪不过可以想一想扁担，两边重量相同反而比较省力）。那么现在零崎最少要消耗多少体力值才能完成这项艰巨的任务呢？

## 输入

每组输入数据有两行,第一行有两个数n,k(2<=2*k<=n<2000)。

第二行有n个整数分别表示n件物品的重量(重量是一个小于2^15的正整数)。

## 输出

对于每组数据，输出一行，为零崎需要消耗的最少体力值。

## 输入样例

```
2 1
1 3
```

## 输出样例

```
4
```

## 思路

DP

因为物品的出现顺序无所谓，那么我们不妨先按照从小到大进行排序，相邻两者的消耗尽可能小

记录dp(i,j)表示前i个物品当中，取走j次的消耗

那么如果i正好等于2j的话，那么必须把第i-1个和第i个全都拿走 具体的dp顺序应该是都从1开始，外层i内层j

否则就选择不拿走

本题空间限制较为宽松，是否采用滚动数组降维优化都不会超出空间限制

**如果本题强制限制O(n^2)的dp的话，那么可以采用O(nlogn)的反悔贪心**

**首先将所有的差值平方处理好，然后再构成一个链表，接下来直接按照局部最优解进行贪心。但是为了该贪心可撤掉，则当某个值从堆里拿出来时，需要将其两边被禁用的值之和-当前值放入堆中。具体的操作可以直接见本题代码。**

**与链表+可撤回贪心复杂度相同的解法为wqs二分，可以考虑这样一个决策函数y = g(k) k为选取的对数，g(k)为对应的最小值答案**

那么这个函数串起来，一定可以得到，这个函数是一个下凸函数，那么我们给定直线的斜率c，每次加上一个限制c，再无脑地进行普通的dp求解，即可完成

而对于c，本题的曲线是具有凸性的，使用的限制c越多，拿走的对数也就越多，是单调增的，所以可以对c进行二分查找，查找到的截距与对应选的对数关系，那么选择第一个满足选取数量>=k的即可

**注意到对应dp的真实含义是真实值+kc，所以最后还要减掉kc才是所求解**


# `I` 难题——线段和直线

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 7 总提交人数: 8



## 题目描述

给出N条线段，请问是否存在一条直线可以与全部的线段都相交？

## 输入

第一个行为一个正整数T（T<=1000），代表有T组数据，对于每组数据，首先输入一行，为一个正整数N（N<=100），表示线段的条数，接下来N行，每行四个浮点数x1,y1,x2,y2，表示以点（x1,y1）和（x2,y2）为端点的一条线段。

## 输出

对于每组数据，输出一行，如果存在这样一条直线，输出“YES”，否则输出“NO”（不含引号）

## 输入样例

```
2
3
0.0 0.0 0.0 1.0
0.0 1.0 0.0 2.0
1.0 1.0 2.0 1.0
3
0.0 0.0 0.0 1.0
0.0 2.0 0.0 3.0
1.0 1.0 2.0 1.0
```

## 输出样例

```
YES
NO
```

## HINT

```
注意：
由于浮点数的精度有限，我们认为：假定存在浮点数a和b，且 |a - b| < 10^(-8)，则认为 a=b，因此在判断点是否重合时要注意判定条件。
```

## 思路

计算几何 线段和直线相交

本题的数据范围是相当小的，所以直接枚举做即可

在给定的2n个端点当中，随便任取2个，构成一条直线，和现有的n个线段只要全部相交，即为有解

最坏的时间复杂度是O(n^3)

本题评测数据比较毒瘤，如果线段直线相交函数稍微有一点点出入，就会判定为WA
