# E1-数据结构复习集

**所有的重复题目不再做整理，请自行到对应第一次出现的比赛进行查询**

# `C` 借教室

时间限制：1000ms  内存限制：65536kb

通过率：/ `(%) `  正确率：/ `(%)`

## 题目描述

在大学期间，经常需要租借教室。大到院系举办活动，小到学习小组自习讨论，都需要向学校申请借教室。教室的大小功能不同，借教室人的身份不同，借教室的手续也不一样。面对海量租借教室的信息，我们自然希望编程解决这个问题。

我们需要处理接下来n天的借教室信息，其中第i天学校有ri个教室可供租借。共有m份订单，每份订单用三个正整数描述，分别为dj, sj, tj，表示某租借者需要从第sj天到第tj天租借教室（包括第sj天和第tj天），每天需要租借dj个教室。

我们假定，租借者对教室的大小、地点没有要求。即对于每份订单，我们只需要每天提供dj个教室，而它们具体是哪些教室，每天是否是相同的教室则不用考虑。借教室的原则是先到先得，也就是说我们要按照订单的先后顺序依次为每份订单分配教室。如果在分配的过程中遇到一份订单无法完全满足，则需要停止教室的分配，通知当前申请人修改订单。这里的无法满足指从第sj天到第tj天中有至少一天剩余的教室数量不足dj个。

现在我们需要知道，是否会有订单无法完全满足。如果有，需要通知哪一个申请人修改订单。

## 输入

第一行包含两个正整数n, m，表示天数和订单的数量。

第二行包含n个正整数，其中第i个数为ri，表示第i天可用于租借的教室数量。

接下来有m行，每行包含三个正整数dj, sj, tj，表示租借的数量，租借开始、结束分别在第几天。

每行相邻的两个数之间均用一个空格隔开。天数与订单均用从1开始的整数编号。

对于 100%的数据，有1<=n, m<=10^6, 0<=ri, dj<=10^9, 1<=sj<=tj<=n。

## 输出

如果所有订单均可满足，则输出只有一行，包含一个整数 0。否则（订单无法完全满足）

输出两行，第一行输出一个负整数-1，第二行输出需要修改订单的申请人编号。

## 输入样例

```
4 3 
2 5 4 3 
2 1 3 
3 2 4 
4 2 4 
```

## 输出样例

```
-1 
2 
```

## 思路

**本题的做法为差分+二分答案**

首先关于需求这个事情，需要通过差分来解决

**核心就是，如果是[s, t]这段时间有要求，那么时间轴上s要需求+1 t+1这里需求-1，最后前缀和处理一下，就知道需求的最大值是多少了**

**之所以需要用二分答案，是需要判断到最大到第几天，都可以足够满足需求，当答案是m的时候，也就意味着订单满足要求，输出0**

**如果答案ans小于m，那么说明ans开始就有问题了，需要对这里做修改，输出一行-1再输出一行ans**

# `D` Bessie Come Home

时间限制：1000ms  内存限制：65536kb

通过率：/ `(%) `  正确率：/ `(%)`

## 题目描述

现在是晚餐时间,而母牛们在外面分散的牧场中。农民约翰按响了电铃,所以她们开始向谷仓走去。你的工作是要指出哪只母牛会最先到达谷仓(在给出的测试数据中,总会有且只有一只最快的母牛)。在挤奶的时候(晚餐前),每只母牛都在她自己的牧场上,一些牧场上可能没有母牛。每个牧场由一条条道路和一个或多个牧场连接(可能包括自己)。有时，两个牧场(可能是字母相同的)之间会有超过一条道路相连。至少有一个牧场和谷仓之间有道路连接。因此,所有的母牛最后都能到达谷仓,并且母牛总是走最短的路径。当然,母牛能向着任意一方向前进,并且她们以相同的速度前进。牧场被标记为'a'..'z'和'A'..'Y',在用大写字母表示的牧场中有一只母牛,小写字母中则没有。谷仓的标记是'Z',注意没有母牛在谷仓中。

注意'm'和'M'不是同一个牧场 否则错误 上面的意思是说：输入数据中可能会同时存在M,m，比如 M a a m m z

## 输入

第 1 行: 整数 P(1<= P<=10000),表示连接牧场(谷仓)的道路的数目。

第 2 ..P+1行: 用空格分开的两个字母和一个整数:

被道路连接牧场的标记和道路的长度(1<=长度<=1000)。

## 输出

单独的一行包含二个项目: 最先到达谷仓的母牛所在的牧场的标记,和这只母牛走过的路径的长度。

## 输入样例

```
5
A d 6
B d 3
C e 9
d Z 8
e Z 3
```

## 输出样例

```
B 11
```

## 思路

**大小写字母先分别做好映射，然后以谷仓为源点套非负权单源最短路模板即可**

# `E` 传纸条

时间限制：1000ms  内存限制：65536kb

通过率：/ `(%) `  正确率：/ `(%)`

## 题目描述

小渊和小轩是好朋友也是同班同学，他们在一起总有谈不完的话题。一次素质拓展活动中，班上同学安排做成一个m行n列的矩阵，而小渊和小轩被安排在矩阵对角线的两端，因此，他们就无法直接交谈了。幸运的是，他们可以通过传纸条来进行交流。纸条要经由许多同学传到对方手里，小渊坐在矩阵的左上角，坐标(1,1)，小轩坐在矩阵的右下角，坐标(m,n)。从小渊传到小轩的纸条只可以向下或者向右传递，从小轩传给小渊的纸条只可以向上或者向左传递。

在活动进行中，小渊希望给小轩传递一张纸条，同时希望小轩给他回复。班里每个同学都可以帮他们传递，但只会帮他们一次，也就是说如果此人在小渊递给小轩纸条的时候帮忙，那么在小轩递给小渊的时候就不会再帮忙。反之亦然。

还有一件事情需要注意，全班每个同学愿意帮忙的好感度有高有低（注意：小渊和小轩的好心程度没有定义，输入时用0表示），可以用一个0-100的自然数来表示，数越大表示越好心。小渊和小轩希望尽可能找好心程度高的同学来帮忙传纸条，即找到来回两条传递路径，使得这两条路径上同学的好心程度只和最大。现在，请你帮助小渊和小轩找到这样的两条路径。

## 输入

输入的第一行有2个用空格隔开的整数m和n，表示班里有m行n列（1<=m,n<=50）。

接下来的m行是一个m*n的矩阵，矩阵中第i行j列的整数表示坐在第i行j列的学生的好心程度。每行的n个整数之间用空格隔开。

100%的数据满足：1<=m,n<=50

## 输出

输出共一行，包含一个整数，表示来回两条路上参与传递纸条的学生的好心程度之和的最大值。

## 输入样例

```
3 3
0 3 9
2 8 5
5 7 0
```

## 输出样例

```
34
```

## 思路

**对于本题，我们需要重新整理思路，很容易想到，两次dp取其中一趟是最大值这样必然是错误的**

既然不能分两次处理，那就同步处理吧。如何同步呢？**多路DP，即想象两个人同时从左上走到右下，保证在同一点只取一次，求两人最大金币数和。**用四维数组dp[20] [20] [20] [20]？看着就挺吓人的，不过简单易懂，状态转移方程也可以很快得出：dp[i ] [j ] [x] [y]=max{dp[i-1] [j] [x-1] [y],dp[i-1] [j] [x] [y-1],dp[i] [j-1] [x-1] [y],dp[i] [j-1] [x] [y-1]}（**当i+j=x+y的时候需要换另一个式子**），代表两人到达(i,j)和(x,y)时的最大金币数。虽然明知会MLE，这一步的思考是有必要的，因为这是优化的基础。

**接下来就是4维降3维，很容易看出上面的y=i+j-x 保证y＞=0即可**

**在有了上述的状态转移方程，发现第一个纬度i只和i与i-1有关，则可以进一步进行滚动数组的优化，降3维至2维（虽然本题3维不会爆空间，完全可以过）**

**故本题解上传3维和2维两个版本，供各位参考。**

**另外一个比较娱乐的思路就是，采用最大费用最大流的方法来做，当走的次数不是2次而是多次，很难拿超高维度的dp来解决的时候，采用这种方法是比较合适的（具体参见洛谷P2045），本题数据范围较小，恰好可以AC，具体做法见代码。**

