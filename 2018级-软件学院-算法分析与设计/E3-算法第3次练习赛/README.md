# E3-算法第3次练习赛

# 网络流问题来了

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 275 总提交人数: 291

## 题目描述

想哥带着叶姐去了游乐园，有个项目可以让他们在一个m*n (m,n<=30)方格中，取走一些礼物，同时要求任意2个取走的礼物所在方格没有公共边，且取出的礼物让叶姐的满意度最大。

想哥忙于学(lian)习(ai)，难以完成，所以求助于你。

## 输入

第1 行有2 个正整数m和n，分别表示棋盘的行数和列数。

接下来的m行，每行有n个正整数，表示方格中的礼物的满意度。

## 输出

输出一行，为最大满意度

## 输入样例

```
3 3
1 2 3
3 2 3
2 3 1
```

## 输出样例

```
11
```

## 思路

**经典的网络流24题之一——方格取数问题，思路为奇偶染色+最小割**

由于这题范围十分大，所以状压dp和搜索都无法有效的解决问题了。

所以说这玩意儿是怎么整到网络流上的呢？

**我们可以反过来想一想这道题，首先选中了所有的方格，然后尽可能删除权值和最小的那一批方格**

相邻的概念就是，横坐标或者纵坐标的其中一个相差1，对应的**横纵坐标和的奇偶性不一样，这样就形成了一个二分图了！**（之前数据结构上机也有一个题是利用了二分图类似的性质）

那么想办法构造这么一个模型

**删掉一个元素表示不取这个方格，删掉的代价为方格的权值，要么保证策略永远最优要么可以回溯，最终状态是没有互斥的方格**

所以再转换一下...删除连接方格的边，还要权值最小，**那这就是二分图的最小割了啊**

主要是涉及一个点权变成边权的问题，然后同样的还是超级源点和超级汇点

具体怎么构造就是个问题了

源点连向二分图的点集（不放设置为横纵坐标和是奇数的方格），**边权为对应的点权，删掉就表示不取他**，连向汇点的同理，删掉表示不取他

**具体内部连接稍微会有些难想，互斥的点之间，需要全部连接为INF，保证取割集的时候不会被删掉**（删掉的全都是源点连出的和汇点连入的）这样足够能表示不取这些方格了，他们就算互斥，对应的连边因为不连通，也毫无意义了。

互斥的具体条件应该是，上下左右这样取

相对的，不互斥的随便取就完事了

**最后再用上最大流=最小割就完事了**

最后得到的答案就是所有的数减去去掉的和

# 婚车

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 319 总提交人数: 334

## 题目描述

航哥是个土豪，他想在让城市布满他的婚车。但是城市的每条道路单位时间能通过的婚车是有限的，超出则会造成拥堵。他在1号点屯了足够数量的车子，他想知道从城市1号点派出婚车去n号点迎接新娘，在买通交警只允许他的婚车在车道上行驶的条件下，足够多时间之后，n号点单位时间内最多能容纳多少量婚车。

道路都是双向的

## 输入

第一行两个整数，n和m，n为点数，m为边数，点的标号为1~n。

接下来M行，每行三个整数a, b, c, 表示城市中两个点之间有一条单位时间最多通行c辆车的道路。

建图连边之前请注意审题……

1≤𝑛≤10001≤n≤1000

1≤𝑚≤1000001≤m≤100000

1≤𝑎,𝑏≤𝑛,𝑎≠𝑏1≤a,b≤n,a≠b

1≤𝑐≤101≤c≤10

## 输出

输出一个整数，点n处单位时间内最多接受的婚车数量。

## 输入样例

```
4 6
1 2 5
1 3 2
1 4 3
2 3 3
2 4 3
3 4 10
```

## 输出样例

```
10
```

## 思路

网络流模板题

**注意是双向边**

# 要成为魔法少女吗！！

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 309 总提交人数: 316

## 题目描述

酸奶酱是一位魔法少女，并且她很热衷于点化她的其他小伙伴和她一起成为魔法少女。

现在有一个棘手的问题摆在酸奶酱面前——她有M套成为魔法少女不可缺少的魔法战斗服，以及N个想成为魔法少女的小伙伴。魔法战斗服是有灵性的，它有想要跟随的主人。酸奶酱想尽可能多的把更多的魔法战斗服分给她的小伙伴，她现在想知道最多能有几套魔法战斗服能被交到她的小伙伴手里。

注意：一位小伙伴只能拿一件魔法战斗服，一件魔法战斗服也只能交给一位小伙伴。

## 输入

第一行为两个整数N和M，分别表示小伙伴的数量和魔法战斗服的数量。（0<=N，M<=100）

接下来M行，第i行的第一个整数K表示第i件魔法战斗服想要跟随的主人的数量。接下来K个整数num，表示魔法战斗服想要跟随的主人编号。（0<=K，num<=N）

## 输出

对于每组数据，输出一行，为最多能送出的魔法战斗服的数量。

## 输入样例

```
3 4
1 2
3 1 2 3
1 1
0
```

## 输出样例

```
3
```

## 思路

二分图最大匹配板子

# SkyLee的脱单大计

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 266 总提交人数: 293

## 题目描述

SkyLee想要脱单，可是他又不想拆散可能在一起的有缘人，毕竟SkyLee是一个善良的人。

SkyLee想知道最理想的情况下，即可能在一起的人数最多时，还有哪些女生仍然是单身。假设学校男女比非常和谐，恰好为1：1（肯定不是北航啦，别幻想了QAQ）

## 输入

多组数据输入

第一行一个整数n，为学校男生数量或女生数量（都一样的啦）保证n<10000

接下来1行，每行n个整数a[i] (表示男生i暗恋的女生编号)

接下来1行，每行n个整数b[i] (表示女生i暗恋的男生编号)

（如果暗恋的人编号为0说明没有暗恋的人）

## 输出

对于每组数据，输出一行，为最后剩下的女生的人数

## 输入样例

```
3
1 1 1
2 0 1
```

## 输出样例

```
1
```

## 思路

还是二分图最大匹配

**注意到无论是男生暗恋女生还是女生暗恋男生，都等性质的从对应的男生到对应的女生连接就行了...剩下的和二分图最大匹配就一模一样，所以这题也挺怪**

# 计网的烦恼

时间限制: 1000 ms 内存限制: 65536 kb

总通过人数: 316 总提交人数: 327

## 题目描述

计网课上有一道题：一条街道安装无线网络，需要放置M个路由器。整条街道上一共有N户居民，分布在一条直线上，每一户居民必须被至少一台路由器覆盖到。现在的问题是所有路由器的覆盖半径是一样的，我们希望用覆盖半径尽可能小的路由器来完成任务，因为这样可以节省成本。

## 输入

输入第一行包含两个整数M和N，以下N行每行一个整数Hi表示该户居民在街道上相对于某个点的坐标。

## 输出

输出仅包含一个数，表示最小的覆盖半径，保留一位小数。

## 输入样例

```
2 3
1
3
10 
```

## 输出样例

```
1.0
```

## HINT

【样例输出】（在2，10位置上各放一个）

【数据规模】

对于100%的数据，有1 ≤N, M ≤100000，-10000000 ≤Hi ≤10000000。

## 思路

**二分答案问题，而且是找到合法解的最小值**

**对于每一种答案，只要他够用小于等于M个去覆盖这些，无脑地从一个点往后覆盖，即为合法解**

**所以采用直径进行覆盖的计算，每次搜索下一个覆盖起点直接用upper_bound就行了**

