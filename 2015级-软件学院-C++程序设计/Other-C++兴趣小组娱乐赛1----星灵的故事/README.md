# Other-C++兴趣小组娱乐赛1----星灵的故事

# `A` 亚顿的幻方

时间限制：1000ms  内存限制：131072kb

通过率：/ `(%) `  正确率：/ `(%)`

## 题目描述

阿塔尼斯需要一个幻方来激活亚顿之矛。

幻方是一种很神奇的N * N矩阵：它由数字1,2,3,……,N*N构成，且每行、每列及两条对角线上的数字之和都相同。

当N为奇数时，我们可以通过以下方法构建一个幻方：

首先将1写在第一行的中间。

之后，按如下方式从小到大依次填写每个数K(K=2,3,…,N*N)：

1.若(K−1)在第一行但不在最后一列，则将K填在最后一行，(K−1)所在列的右一列；

2.若(K−1)在最后一列但不在第一行，则将K填在第一列，(K−1)所在行的上一行；

3.若(K−1)在第一行最后一列，则将K填在(K−1)的正下方；

4.若(K−1)既不在第一行，也不在最后一列，如果(K−1)的右上方还未填数，则将K填在(K−1)的右上方，否则将K填在(K−1)的正下方。

现给定N请按上述方法帮助阿塔尼斯构造N*N的幻方。

## 输入

输入只有一行，包含一个整数N即幻方的大小。

## 输出

输出包含N行，每行N个整数，即按上述方法构造出的N*N的幻方。相邻两个整数之间用单个空格隔开。

## 输入样例1

```
3
```

## 输出样例2

```
8 1 6
3 5 7
4 9 2
```

## 输入样例2

```
25
```

## 输出样例2

```
327 354 381 408 435 462 489 516 543 570 597 624 1 28 55 82 109 136 163 190 217 244 271 298 325
353 380 407 434 461 488 515 542 569 596 623 25 27 54 81 108 135 162 189 216 243 270 297 324 326
379 406 433 460 487 514 541 568 595 622 24 26 53 80 107 134 161 188 215 242 269 296 323 350 352
405 432 459 486 513 540 567 594 621 23 50 52 79 106 133 160 187 214 241 268 295 322 349 351 378
431 458 485 512 539 566 593 620 22 49 51 78 105 132 159 186 213 240 267 294 321 348 375 377 404
457 484 511 538 565 592 619 21 48 75 77 104 131 158 185 212 239 266 293 320 347 374 376 403 430
483 510 537 564 591 618 20 47 74 76 103 130 157 184 211 238 265 292 319 346 373 400 402 429 456
509 536 563 590 617 19 46 73 100 102 129 156 183 210 237 264 291 318 345 372 399 401 428 455 482
535 562 589 616 18 45 72 99 101 128 155 182 209 236 263 290 317 344 371 398 425 427 454 481 508
561 588 615 17 44 71 98 125 127 154 181 208 235 262 289 316 343 370 397 424 426 453 480 507 534
587 614 16 43 70 97 124 126 153 180 207 234 261 288 315 342 369 396 423 450 452 479 506 533 560
613 15 42 69 96 123 150 152 179 206 233 260 287 314 341 368 395 422 449 451 478 505 532 559 586
14 41 68 95 122 149 151 178 205 232 259 286 313 340 367 394 421 448 475 477 504 531 558 585 612
40 67 94 121 148 175 177 204 231 258 285 312 339 366 393 420 447 474 476 503 530 557 584 611 13
66 93 120 147 174 176 203 230 257 284 311 338 365 392 419 446 473 500 502 529 556 583 610 12 39
92 119 146 173 200 202 229 256 283 310 337 364 391 418 445 472 499 501 528 555 582 609 11 38 65
118 145 172 199 201 228 255 282 309 336 363 390 417 444 471 498 525 527 554 581 608 10 37 64 91
144 171 198 225 227 254 281 308 335 362 389 416 443 470 497 524 526 553 580 607 9 36 63 90 117
170 197 224 226 253 280 307 334 361 388 415 442 469 496 523 550 552 579 606 8 35 62 89 116 143
196 223 250 252 279 306 333 360 387 414 441 468 495 522 549 551 578 605 7 34 61 88 115 142 169
222 249 251 278 305 332 359 386 413 440 467 494 521 548 575 577 604 6 33 60 87 114 141 168 195
248 275 277 304 331 358 385 412 439 466 493 520 547 574 576 603 5 32 59 86 113 140 167 194 221
274 276 303 330 357 384 411 438 465 492 519 546 573 600 602 4 31 58 85 112 139 166 193 220 247
300 302 329 356 383 410 437 464 491 518 545 572 599 601 3 30 57 84 111 138 165 192 219 246 273
301 328 355 382 409 436 463 490 517 544 571 598 625 2 29 56 83 110 137 164 191 218 245 272 299
```

## 思路

直接模拟就完事了

# `B` 卡拉传递

时间限制：1000ms  内存限制：65536kb

通过率：/ `(%) `  正确率：/ `(%)`

## 题目描述

激活亚顿之矛还需要高阶圣堂武士举行一个叫做“卡拉传递”的仪式。

有n个高阶圣堂武士（编号为1到n）正在进行一个信息传递的仪式。在仪式里每位圣堂武士都有一个固定的信息传递对象，其中，编号为i的圣堂武士的信息传递对象是编号为Ti圣堂武士。

游戏开始时，每位圣堂武士都只知道自己的生日。之后每一轮中，所有圣堂武士会同时通过卡拉将自己当前所知的生日信息告诉各自的信息传递对象（注意：可能有圣堂武士可以从若干圣堂武士那里获取信息，但是每位圣堂武士只会把信息告诉一个圣堂武士，即自己的信息传递对象）。当有圣堂武士从别的圣堂武士口中得知自己的生日时，仪式结束。请问该仪式一共可以进行几轮？

## 输入

输入共2行。 第1行包含1个正整数n表示n个圣堂武士。

第2行包含n个用空格隔开的正整数T1,T2,……,Tn其中第i个整数Ti示编号为i的圣堂武士的信息传递对象是编号为Ti的圣堂武士，Ti≤n且Ti≠i

数据保证仪式一定会结束。

对于 30%的数据， n ≤ 200；

对于 60%的数据， n ≤ 2500；

对于 100%的数据， n ≤ 200000。

## 输出

输出共 1 行，包含 1 个整数，表示仪式一共可以进行多少轮。

## 输入样例

```
5
2 4 2 3 1
```

## 输出样例

```
3
```

## 思路

这道题其实可以理解为一个最小环的问题，给定了n条边，边权都是1，求最小的环

然而如果正经的当做图论题来做，复杂度为O(nm)=O(n^2)，必然无法通过。

于是我们考虑采用**不带路径压缩**的并查集，i和k连边，只要查询k的最顶端父亲等于i，那么经过的边的数量就是答案之一，否则就将i和k直接连起来

**然而对于并查集求最小环而言，实时维护+路径压缩是有固定的套路的，这样会明显快非常多，而且判断二分图也会用得上这个东西。**

# `C` N航母问题

时间限制：200ms  内存限制：65536kb

通过率：/ `(%) `  正确率：/ `(%)`

## 题目描述

在n×n格的地图上放置彼此不受攻击的n个航母。按照弹射器的结构，航母可以攻击与之处在同一行或同一列或同一斜线上的其他航母。

n航母问题等价于在n×n的地图上放置n个航母，任何2个航母不放在同一行或同一列或同一斜线上。

## 输入

给定地图的大小n (n ≤ 13)

## 输出

输出一个整数，表示有多少种放置方法

## 输入样例

```
8
```

## 输出样例

```
92
```

## 思路

经典的八皇后搜索题，邓俊辉《数据结构》第四章讲到栈的时候也提及了这个东西

但是本题时间限制稍微有点死，导致n=13的时候无法通过，那么直接在本地算出结果，打表即可。

# `D` 相位转移

时间限制：1000ms  内存限制：131072kb

通过率：/ `(%) `  正确率：/ `(%)`

## 题目描述

圣堂武士们在一艘航母的残骸上举行了“相位转移”大赛。

这项比赛将在一条笔直的弹射舱中进行,弹射舱中分布着一些巨大障碍物。最高议会已经选择好了两块岩石作为比赛起点和终点。

在起点和终点之间,有 N 块岩石(不含起点和终 点的岩石)。在比赛过程中,圣堂武士们将从起点出发,每一步折跃到相邻的岩石,直至到达 终点。

为了提高比赛难度,最高议会计划移走一些岩石,使得圣堂武士们在比赛过程中的最短折跃距离尽可能长。

由于灵能限制, 最高议会至多从起点和终点之间移走 M 块岩石(不能 移走起点和终点的岩石)。

## 输入

输入第一行包含三个整数 L,N,M,分别表示起点到终点的距离,起点和终点之间的岩石数,以及最高议会至多移走的岩石数。

接下来 N 行,每行一个整数,第 i 行的整数 Di(0 < Di < L)表示第 i 块岩石与 起点的距离。这些岩石按与起点距离从小到大的顺序给出,且不会有两个岩石出现在同 一个位置。

## 输出

只包含一个整数, 即最短折跃距离的最大值。

## 输入样例

```
25 5 2 
2
11
14
17 
21
```

## 输出样例

```
4
```

## 思路

采用二分答案，对距离进行二分搜索即可，需要学习二分答案的基础内容和思想
